<!DOCTYPE html>
<html>
<head>
  <title>GCash QR Payment</title>
  <script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <body class="min-h-screen bg-gray-900 bg-center bg-cover flex items-center justify-center" style="background-image: url('apartmentbg.jpg');">

  <!-- Background dark overlay -->
  <div class="absolute inset-0 bg-black/50"></div>

  <!-- Bright foreground box, separated from dark overlay -->
  <div class="relative z-10 bg-white shadow-2xl rounded-xl p-8 max-w-md w-full text-center mx-4">
    <h1 class="text-2xl font-bold text-gray-800 mb-2">Pay Rent via GCash</h1>
    <p class="text-sm text-gray-600 mb-4">Scan the QR code to pay to <strong>09567761982</strong></p>

    <div class="flex justify-center mb-4">
      <div id="qrcode" class="bg-white p-2 rounded-md shadow-md"></div>
    </div>

    <p class="text-sm text-gray-500">Amount to Pay:</p>
    <p id="gcash-amount" class="text-xl font-bold text-green-600 mb-6">â‚±0.00</p>

<!-- Your confirm button -->
<button id="confirmBtn"
  class="w-full bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 transition duration-300">
  Confirm Booking
</button>
  </div>


<script>
  window.addEventListener('DOMContentLoaded', () => {
    const phoneNumber = "09567761982";

    // Safely retrieve and parse the total payment
    const storedAmount = sessionStorage.getItem('totalPayment');
    let amount = 0;

    if (storedAmount && !isNaN(storedAmount)) {
      amount = parseFloat(storedAmount);
    }

    // Display the formatted amount
    const amountDisplay = document.getElementById('gcash-amount');
    amountDisplay.textContent = `â‚±${amount.toLocaleString(undefined, {
      minimumFractionDigits: 2,
      maximumFractionDigits: 2
    })}`;

    // Generate QR code with GCash payment link
    const qrData = `https://gcash.app/pay?number=${phoneNumber}&amount=${amount.toFixed(2)}`;

    new QRCode(document.getElementById("qrcode"), {
      text: qrData,
      width: 200,
      height: 200
    });

    // Add click event listener for confirm booking button
    document.getElementById('confirmBtn').addEventListener('click', () => {
      const emailInput = document.getElementById('emailInput');
      const email = emailInput ? emailInput.value.trim() : '';

      alert(`ðŸŽ‰ Booking Confirmed! Thank you for your payment.\nA receipt will be sent to: ${email} (email sending is currently disabled).`);

      // Redirect to index.html after alert is dismissed
      window.location.href = 'index.html';
    });
  });
</script>




</body>
</html>
